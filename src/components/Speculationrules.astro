---
await new Promise<void>((resolve) => {
    setTimeout(resolve, 1000);
});

(globalThis as any).linksOnPages ??= {};
const linksOnPage: Set<string> = ((globalThis as any).linksOnPages[
    Astro.url.pathname
] ??= new Set());
---

<script
    is:inline
    type="speculationrules"
    set:html={JSON.stringify({
        prerender: [
            {
                urls: Array.from(linksOnPage),
            },
        ],
    })}
/>
